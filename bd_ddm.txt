delimiter //
create trigger eliminarProducto
after delete on 
tb_productos
for each row begin 
	 insert into tb_historial_productos()
     value(null,concat("Se ilimino el producto: ", old.producto_nombre),concat("Codigo: ",old.id_producto),DATE_FORMAT(NOW(), '%Y-%m-%d %h:%i:%s %p'));
end;
// delimiter ;



delimiter //
create trigger crearProducto
after insert on 
tb_productos
for each row begin 
	 insert into tb_historial_productos()
     value(null,concat("Se Creo el producto: ", new.producto_nombre),concat("Codigo: ",new.id_producto),DATE_FORMAT(NOW(), '%Y-%m-%d %h:%i:%s %p'));
end;
// delimiter ;

delimiter //
CREATE FUNCTION EliminarProductos(id VARCHAR(10)) RETURNS INT
BEGIN
    DECLARE id_pro VARCHAR(10);
    SET id_pro = id;

    DELETE FROM tb_comentarios WHERE id_producto = id_pro;
    DELETE FROM tb_historial WHERE id_producto = id_pro;
    DELETE FROM tb_categoriasProducto WHERE id_producto = id_pro;
    DELETE FROM tb_valoracion WHERE id_producto = id_pro;
    DELETE FROM tb_carypro WHERE id_producto = id_pro;
    DELETE FROM tb_productos WHERE id_producto = id_pro;

    RETURN 1;
END;
// DELIMITER ;


select ( select MONTH(fecha_de_compra)) as meses ,total_compra,fecha_de_compra from  tb_compras
WHERE MONTH(fecha_de_compra) = 1 or MONTH(fecha_de_compra) = 2 or MONTH(fecha_de_compra) = 3 or
MONTH(fecha_de_compra) = 4 or MONTH(fecha_de_compra) = 5 or MONTH(fecha_de_compra) = 6 or MONTH(fecha_de_compra) = 7 or MONTH(fecha_de_compra) = 8 or
MONTH(fecha_de_compra) = 9 or MONTH(fecha_de_compra) = 10 or MONTH(fecha_de_compra) = 11 or MONTH(fecha_de_compra) = 12 ;